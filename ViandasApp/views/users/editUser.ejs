<%- include('../partials/head',{cssFile:'userStyles.css'})%>


  <body>

    <%- include('../partials/header')%>
      <main class="main-body">

        <main class="main-register">
          <form action="/users/edit/<%= oldData.id %>"" method="POST" class="form" enctype="multipart/form-data">
            <div class="form-register">
              <h4>Edicion</h4>
              <div class="form-group botton-margin">
                <label for=" fullName"> <b>Nombre y Apellido</b></label>
                <input class="form-control <%= locals.errors && errors.fullName ? 'is-invalid' : null %>" type="text"
                  name="fullName" id="fullName" placeholder="Ingrese su Nombre y Apellido"
                  value="<%= locals.oldData ? oldData.fullName : null %>">

                <div class="text-danger">
                  <%= (locals.errors && errors.fullName) ? errors.fullName.msg : '' %>
                </div>


              </div>
              <div class="form-group botton-margin">
                <label for=" birthDate"> <b> Fecha de Nacimiento </b></label>
                <input class="form-control <%= locals.errors && errors.birthDate ? 'is-invalid' : null %>" type="date"
                  name="birthDate" id="birthDate" value="<%= locals.oldData ? oldData.birthDate : null %>">
                <div class="text-danger">
                  <%= (locals.errors && errors.birthDate) ? errors.birthDate.msg : '' %>
                </div>
              </div>
              <div class="form-group botton-margin">
                <label for=" email"> <b>Email</b> </label>
                <input class="form-control <%= locals.errors && errors.email ? 'is-invalid' : null %>" type="email"
                  name="email" id="email" placeholder="Ingrese su Email"
                  value="<%= locals.oldData ? oldData.email : null %>">
                <div class="text-danger">
                  <%= (locals.errors && errors.email) ? errors.email.msg : '' %>
                </div>
              </div>
              <div class="form-group botton-margin">
                <label for=" celular"><b>Celular</b> </label>
                <input class="form-control <%= locals.errors && errors.mobilePhone ? 'is-invalid' : null %>" type="text"
                  name="mobilePhone" id="celular" placeholder="Ingrese su Celular"
                  value="<%= locals.oldData ? oldData.mobilePhone : null %>">
                <div class="text-danger">
                  <%= (locals.errors && errors.mobilePhone) ? errors.mobilePhone.msg : '' %>
                </div>
              </div>
    
              <div class="form-group botton-margin">
                <label><b>País de nacimiento:</b></label>
                <select name="country" class="form-control <%= locals.errors && errors.country ? 'is-invalid' : null %>"
                  <option value="">Elegí un país</option>
              
                    <% for (const oneCountry of countries) { %>
                      <option value="<%=oneCountry.id%>"<%=locals.oldData && (oneCountry.id===oldData.country) ? 'selected' :null %>> <%= oneCountry.name %> </option>
                      <% } %>
                </select>
                <div class="text-danger">
                  <%= (locals.errors && errors.country) ? errors.country.msg : '' %>
                </div>
              </div>
              <% if (locals.isLogged && locals.userLogged.role_id === 1) { %>
                <div class="form-group botton-margin">
                  <label><b>Perfil:</b></label>
                  <select name="profile"
                    class="form-control <%= locals.errors && errors.country ? 'is-invalid' : null %>" <option
                    value="">Elegí un Perfil</option>
                  
                      <% for (const profile of userRoles) { %>
                        <option value="<%= profile.id %>" <%=locals.oldData && (profile.id===oldData.profile) ? 'selected' :null %>> <%= profile.role %> </option>
                        <% } %>
                  </select>
                  <div class="text-danger">
                    <%= (locals.errors && errors.profile) ? errors.profile.msg : '' %>
                  </div>
                </div>
                <% } %>
                <div class="form-group botton-margin">
                  <label for="userImage"> <b> Imagen De Usuario </b></label>
                  <input class="form-control <%= locals.errors && errors.avatar ? 'is-invalid' : null %>" type="file"
                    name="avatar" id="userImage" value="<%= locals.oldData ? oldData.avatar : null %>">
                  <div class="text-danger">
                    <%= (locals.errors && errors.avatar) ? errors.avatar.msg : '' %>
                  </div>
                </div>
                <div class="form-group botton-margin">
                  <label for="password"> <b>Contraseña</b> </label>
                  <input class="form-control <%= locals.errors && errors.password ? 'is-invalid' : null %>"
                    type="password" name="password" id="password" placeholder="Ingrese su Contraseña">
                  <div class="text-danger">
                    <%= (locals.errors && errors.password) ? errors.password.msg : '' %>
                  </div>
                </div>
                <div class="form-group botton-margin">
                  <label for="confirmPassword"> <b>Confirmar Contraseña</b> </label>
                  <input class="form-control <%= locals.errors && errors.password ? 'is-invalid' : null %>"
                    type="password" name="confirmPassword" id="confirmPassword" placeholder="Confirme su Contraseña">
                  <div class="text-danger">
                    <%= (locals.errors && errors.confirmPassword) ? errors.confirmPassword.msg : '' %>
                  </div>
                </div>

           
                <div class="flex-center">
                  <button type="submit" class="btn btn-warning button-size">Actualizar</button>
                </div>

                
              </div>
          </form>
        </main>
      </main>
      <script src='../scripts/registerValidation.js'></script>
  </body>
  <%- include('../partials/footer')%>