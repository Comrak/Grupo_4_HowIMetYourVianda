<%- include('../partials/head',{cssFile:'userStyles.css'})%>


  <body>

    <%- include('../partials/header')%>
      <main class="main-body">

        <main class="main-register">
          <form action="/users/address/edit/<%=addressToEdit.id%>" method="post" class="form-address" >
            
            <div class="form-register">

              <h4>Direcciones</h4>

              <div class="form-group botton-margin">
                <label for=" name"> <b>Alias de la Dirección</b></label>
                <input class="form-control <%= locals.errors && errors.name ? 'is-invalid' : null %>" type="text"
                  name="name" id="name" placeholder="Ingrese el Nombre para esta Direccion"
                  value="<%= locals.oldData ? oldData.name : addressToEdit.name %>">
                  <div class="text-danger">
                  <%= (locals.errors && errors.name) ? errors.name.msg : '' %>
                </div>
              </div>
              
              <div class="form-group botton-margin">
                <label for=" street"> <b> Calle</b></label>
                <input class="form-control <%= locals.errors && errors.street ? 'is-invalid' : null %>" type="text"
                  name="street" id="street" value="<%= locals.oldData ? oldData.street : addressToEdit.street %>">
                <div class="text-danger">
                  <%= (locals.errors && errors.street) ? errors.street.msg : '' %>
                </div>
              </div>

              <div class="form-group botton-margin">
                <label for=" number"> <b> Altura</b></label>
                <input class="form-control <%= locals.errors && errors.number ? 'is-invalid' : null %>" type="text"
                  name="number" id="number" value="<%= locals.oldData ? oldData.number : addressToEdit.number %>">
                <div class="text-danger">
                  <%= (locals.errors && errors.number) ? errors.number.msg : '' %>
                </div>
              </div>

              <div class="form-group botton-margin">
                <label for=" floor"> <b> Piso</b></label>
                <input class="form-control <%= locals.errors && errors.floor ? 'is-invalid' : null %>" type="text"
                  name="floor" id="floor" value="<%= locals.oldData ? oldData.floor : addressToEdit.floor %>">
                <div class="text-danger">
                  <%= (locals.errors && errors.floor) ? errors.floor.msg : '' %>
                </div>
              </div>

              <div class="form-group botton-margin">
                <label for=" dept"> <b> Departamento</b></label>
                <input class="form-control <%= locals.errors && errors.dept ? 'is-invalid' : null %>" type="text"
                  name="dept" id="dept" value="<%= locals.oldData ? oldData.dept : addressToEdit.dept %>">
                <div class="text-danger">
                  <%= (locals.errors && errors.dept) ? errors.dept.msg : '' %>
                </div>
              </div>

              <div class="form-group botton-margin">
                <label for=" zipCode"> <b> Codigo Postal</b></label>
                <input class="form-control <%= locals.errors && errors.zipCode ? 'is-invalid' : null %>" type="text"
                  name="zipCode" id="zipCode" value="<%= locals.oldData ? oldData.zipCode : addressToEdit.zipCode %>">
                <div class="text-danger">
                  <%= (locals.errors && errors.zipCode) ? errors.zipCode.msg : '' %>
                </div>
              </div>


              <div class="form-group botton-margin">
                <label><b>Ciudad:</b></label>
                <select name="city_id" class="form-control <%= locals.errors && errors.city ? 'is-invalid' : null %>"
                  <option value="">Elegí una ciudad</option>

                  <% for (const oneCity of cities) { %>
                    <option value="<%=oneCity.id%>" <%=locals.oldData && (oneCity.id===oldData.city)
                      ? 'selected' :null %>> <%= oneCity.name %>
                    </option>
                    <% } %>
                </select>
                <div class="text-danger">
                  <%= (locals.errors && errors.city) ? errors.city.msg : '' %>
                </div>

              <div class="form-group botton-margin">
                <label><b>País:</b></label>
                <select name="country_id" class="form-control <%= locals.errors && errors.country ? 'is-invalid' : null %>"
                  <option value="">Elegí un país</option>

                  <% for (const oneCountry of countries) { %>
                    <option value="<%=oneCountry.id%>" <%=locals.oldData && (oneCountry.id===oldData.country)
                      ? 'selected' :null %>> <%= oneCountry.name %>
                    </option>
                    <% } %>
                </select>
                <div class="text-danger">
                  <%= (locals.errors && errors.country) ? errors.country.msg : '' %>
                </div>

                <br>
                <div class="flex-center">
                  <button type="submit" class="btn btn-warning button-size">Editar Dirección</button>
                </div>


              </div>
          </form>
          
        </main>
        <script src="/scripts/addressValidation.js"></script>
      </main>
      <script src="/js/UserEvents.js"></script>
  </body>
  <%- include('../partials/footer')%>